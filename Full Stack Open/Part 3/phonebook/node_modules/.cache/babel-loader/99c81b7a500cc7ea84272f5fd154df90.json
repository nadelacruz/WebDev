{"ast":null,"code":"import _objectSpread from\"/home/nadelacruz/Desktop/WebDev/Full Stack Open/Part 3/phonebook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/nadelacruz/Desktop/WebDev/Full Stack Open/Part 3/phonebook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import Filter from\"./components/Filter\";import Notification from\"./components/Notification\";import PersonForm from\"./components/PersonForm\";import Persons from\"./components/Persons\";import personsService from\"./services/persons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),searchText=_useState8[0],setSearchText=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),notificationMessage=_useState10[0],setNotificationMessage=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isErrorMessage=_useState12[0],setIsErrorMessage=_useState12[1];useEffect(function(){personsService.getAll().then(function(initialPersonList){return setPersons(initialPersonList);});},[]);var clearNameAndNumberFields=function clearNameAndNumberFields(){setNewName(\"\");setNewNumber(\"\");};var handleNameTextboxChange=function handleNameTextboxChange(event){setNewName(event.target.value);};var handleNumberTextboxChange=function handleNumberTextboxChange(event){setNewNumber(event.target.value);};var handleSearchTextboxChange=function handleSearchTextboxChange(event){setSearchText(event.target.value);};var showNotificationMessage=function showNotificationMessage(message,isError){setNotificationMessage(message);setIsErrorMessage(isError);setTimeout(function(){return setNotificationMessage(null);},5000);};var handleSubmit=function handleSubmit(event){event.preventDefault();var checkIfNameIsFound=persons.find(function(person){return person.name===newName;});if(checkIfNameIsFound===undefined){var newPerson={name:newName,number:newNumber};personsService.create(newPerson).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));showNotificationMessage(\"Added \".concat(newPerson.name),false);clearNameAndNumberFields();}).catch(function(error){showNotificationMessage(\"\".concat(error.response.data.error),true);});}else if(// eslint-disable-next-line no-alert\nwindow.confirm(\"\".concat(checkIfNameIsFound.name,\" is already added to the phonebook, replace the old number with a new one?\"))){var changedPerson=_objectSpread(_objectSpread({},checkIfNameIsFound),{},{number:newNumber});personsService.update(changedPerson.id,changedPerson).then(function(returnedPerson){setPersons(persons.map(function(person){return person.id!==changedPerson.id?person:returnedPerson;}));showNotificationMessage(\"Updated \".concat(changedPerson.name,\"'s number\"),false);clearNameAndNumberFields();}).catch(function(error){showNotificationMessage(\"\".concat(error.response.data.error),true);});}};var handleDelete=function handleDelete(person){// eslint-disable-next-line no-alert\nif(window.confirm(\"Delete \".concat(person.name,\"?\"))){personsService.deleteElementWithId(person.id).catch(function(){showNotificationMessage(\"Information of \".concat(person.name,\" has already been removed from server\"),true);});setPersons(persons.filter(function(currentPerson){return person.name!==currentPerson.name;}));}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:notificationMessage,isErrorMessage:isErrorMessage}),/*#__PURE__*/_jsx(Filter,{searchText:searchText,handleSearchTextboxChange:handleSearchTextboxChange}),/*#__PURE__*/_jsx(\"h3\",{children:\"Add a new\"}),/*#__PURE__*/_jsx(PersonForm,{handleSubmit:handleSubmit,newName:newName,newNumber:newNumber,handleNameTextboxChange:handleNameTextboxChange,handleNumberTextboxChange:handleNumberTextboxChange}),/*#__PURE__*/_jsx(\"h3\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{actualPersons:persons,actualSearchText:searchText,handleDelete:handleDelete})]});};export default App;","map":{"version":3,"sources":["/home/nadelacruz/Desktop/WebDev/Full Stack Open/Part 3/phonebook/src/App.jsx"],"names":["useEffect","useState","Filter","Notification","PersonForm","Persons","personsService","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","searchText","setSearchText","notificationMessage","setNotificationMessage","isErrorMessage","setIsErrorMessage","getAll","then","initialPersonList","clearNameAndNumberFields","handleNameTextboxChange","event","target","value","handleNumberTextboxChange","handleSearchTextboxChange","showNotificationMessage","message","isError","setTimeout","handleSubmit","preventDefault","checkIfNameIsFound","find","person","name","undefined","newPerson","number","create","returnedPerson","concat","catch","error","response","data","window","confirm","changedPerson","update","id","map","handleDelete","deleteElementWithId","filter","currentPerson"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport Filter from \"./components/Filter\";\nimport Notification from \"./components/Notification\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personsService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [searchText, setSearchText] = useState(\"\");\n\n  const [notificationMessage, setNotificationMessage] = useState(null);\n  const [isErrorMessage, setIsErrorMessage] = useState(false);\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then((initialPersonList) => setPersons(initialPersonList));\n  }, []);\n\n  const clearNameAndNumberFields = () => {\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const handleNameTextboxChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberTextboxChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleSearchTextboxChange = (event) => {\n    setSearchText(event.target.value);\n  };\n\n  const showNotificationMessage = (message, isError) => {\n    setNotificationMessage(message);\n    setIsErrorMessage(isError);\n    setTimeout(() => setNotificationMessage(null), 5000);\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const checkIfNameIsFound = persons.find(\n      (person) => person.name === newName\n    );\n    if (checkIfNameIsFound === undefined) {\n      const newPerson = {\n        name: newName,\n        number: newNumber,\n      };\n      personsService\n        .create(newPerson)\n        .then((returnedPerson) => {\n          setPersons(persons.concat(returnedPerson));\n          showNotificationMessage(`Added ${newPerson.name}`, false);\n          clearNameAndNumberFields();\n        })\n        .catch(error => {\n          showNotificationMessage(`${error.response.data.error}`, true);\n        });\n      \n    } else if (\n      // eslint-disable-next-line no-alert\n      window.confirm(\n        `${checkIfNameIsFound.name} is already added to the phonebook, replace the old number with a new one?`\n      )\n    ) {\n      const changedPerson = { ...checkIfNameIsFound, number: newNumber };\n      personsService\n        .update(changedPerson.id, changedPerson)\n        .then((returnedPerson) => {\n          setPersons(\n            persons.map((person) =>\n              person.id !== changedPerson.id ? person : returnedPerson\n            )\n          );\n          showNotificationMessage(`Updated ${changedPerson.name}'s number`, false);\n          clearNameAndNumberFields();\n        })\n        .catch(error => {\n          showNotificationMessage(`${error.response.data.error}`, true);\n        });\n    }\n  };\n\n  const handleDelete = (person) => {\n    // eslint-disable-next-line no-alert\n    if (window.confirm(`Delete ${person.name}?`)) {\n      personsService.deleteElementWithId(person.id).catch(() => {\n        showNotificationMessage(\n          `Information of ${person.name} has already been removed from server`,\n          true\n        );\n      });\n      \n      setPersons(\n        persons.filter((currentPerson) => person.name !== currentPerson.name)\n      );\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification\n        message={notificationMessage}\n        isErrorMessage={isErrorMessage}\n      />\n      <Filter\n        searchText={searchText}\n        handleSearchTextboxChange={handleSearchTextboxChange}\n      />\n      <h3>Add a new</h3>\n      <PersonForm\n        handleSubmit={handleSubmit}\n        newName={newName}\n        newNumber={newNumber}\n        handleNameTextboxChange={handleNameTextboxChange}\n        handleNumberTextboxChange={handleNumberTextboxChange}\n      />\n      <h3>Numbers</h3>\n      <Persons\n        actualPersons={persons}\n        actualSearchText={searchText}\n        handleDelete={handleDelete}\n      />\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}